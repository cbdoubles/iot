{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport dblib from '@/dblib';\nimport PopupBox from '@/components/PopupBox.vue';\nimport PictureInput from 'vue-picture-input';\nimport axios from 'axios';\nexport default {\n  components: {\n    PopupBox,\n    PictureInput\n  },\n  data() {\n    return {\n      title: '',\n      description: '',\n      box: '',\n      box_id: '',\n      box_number: 0,\n      get_image: ''\n    };\n  },\n  mixins: [dblib],\n  methods: {\n    async submitForm() {\n      try {\n        const formData = new FormData();\n        formData.append('box_uid', this.box_id);\n        formData.append('title', this.title);\n        formData.append('description', this.description);\n        formData.append('image', this.$refs.pictureInput.file);\n        console.log(formData);\n        axios.post('http://127.0.0.1:8000/api/v1/create-product/', formData).then(await this.showPopup(`Go to Box ${this.box_number} to donate your item. Thank you!`));\n        // await this.createProduct({\n        //   box_uid: this.box_id,\n        //   title: this.title,\n        //   description: this.description,\n        //   get_image: this.$refs.pictureInput.file,\n        // });\n        this.$router.push({\n          path: `/login`\n        });\n\n        // Optionally, you can handle the response - uncomment\n        // console.log('Server Response:', response.data);\n\n        // Emit an event to notify the parent component\n        this.$emit('form-submitted', {\n          box_id: this.box_id,\n          box_number: this.box_number,\n          title: this.title,\n          description: this.description,\n          get_image: this.get_image\n        });\n      } catch (error) {\n        console.error('Error submitting form:', error);\n        // Optionally, you can handle errors and show a message to the user\n      }\n    },\n    onChange(image) {\n      console.log('New picture selected!');\n      if (image) {\n        console.log('Picture loaded.');\n        console.log(this.$refs.pictureInput.file);\n        // console.log(this.getBase64Image(this.$refs.pictureInput.file))\n      } else {\n        console.log('FileReader API not supported: use the <form>, Luke!');\n      }\n    },\n    async showPopup(message) {\n      // Access the showPopup method of the PopupBox component\n      await this.$refs.popupBox.showPopup(message);\n    }\n  },\n  async created() {\n    // Call getItems when the component is created\n    try {\n      this.isLoading = true;\n      this.box = await this.getFreeBox();\n      console.log(\"Box_num: \", this.box.box_num);\n      if (this.box.box_num == -1) {\n        await this.showPopup(`There are no available boxes :((`);\n        this.$router.push({\n          path: `/login`\n        });\n      } else {\n        this.box_id = this.box.unique_ID;\n        this.box_number = this.box.box_num;\n        console.log(\"Box_id: \", this.box_id);\n        console.log(\"Box_num: \", this.box_number);\n      }\n    } catch (error) {\n      console.error('Error fetching product:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n};","map":{"version":3,"names":["dblib","PopupBox","PictureInput","axios","components","data","title","description","box","box_id","box_number","get_image","mixins","methods","submitForm","formData","FormData","append","$refs","pictureInput","file","console","log","post","then","showPopup","$router","push","path","$emit","error","onChange","image","message","popupBox","created","isLoading","getFreeBox","box_num","unique_ID"],"sources":["C:\\Users\\20223065\\Documents\\django_be\\website\\src\\components\\DonationInput.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n\r\n    <form id=\"donationForm\" @submit.prevent=\"console.log(form)\">\r\n      <label for=\"title\">Title:</label>\r\n      <input type=\"text\" id=\"title\" v-model=\"title\" />\r\n\r\n      <label for=\"description\">Description:</label>\r\n      <textarea id=\"description\" v-model=\"description\"></textarea>\r\n\r\n      <button @click=\"submitForm\">Submit</button>\r\n      <PopupBox ref=\"popupBox\" />\r\n\r\n      <div class=\"hello\">\r\n        <picture-input ref=\"pictureInput\" width=\"600\" height=\"600\" margin=\"16\" accept=\"image/jpeg\" size=\"10\" prefill=\"./assets/No-image.jpg\"\r\n          button-class=\"btn\" :custom-strings=\"{\r\n            upload: '<h1>Bummer!</h1>',\r\n            drag: 'Drag a ðŸ˜º GIF or GTFO'\r\n          }\" @change=\"onChange\">\r\n        </picture-input>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport dblib from '@/dblib';\r\nimport PopupBox from '@/components/PopupBox.vue';\r\nimport PictureInput from 'vue-picture-input'\r\nimport axios from 'axios';\r\n\r\n\r\nexport default {\r\n  components: {\r\n    PopupBox,\r\n    PictureInput\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      title: '',\r\n      description: '',\r\n      box: '',\r\n      box_id: '',\r\n      box_number: 0,\r\n      get_image: '',\r\n    };\r\n  },\r\n  mixins: [dblib],\r\n\r\n  methods: {\r\n    async submitForm() {\r\n      try {\r\n\r\n        const formData = new FormData()\r\n        formData.append('box_uid', this.box_id)\r\n        formData.append('title', this.title)\r\n        formData.append('description', this.description)\r\n        formData.append('image', this.$refs.pictureInput.file)\r\n        console.log(formData)\r\n        axios.post('http://127.0.0.1:8000/api/v1/create-product/', formData)\r\n        .then(await this.showPopup(`Go to Box ${this.box_number} to donate your item. Thank you!`))\r\n        // await this.createProduct({\r\n        //   box_uid: this.box_id,\r\n        //   title: this.title,\r\n        //   description: this.description,\r\n        //   get_image: this.$refs.pictureInput.file,\r\n        // });\r\n        this.$router.push({ path: `/login` });\r\n\r\n        // Optionally, you can handle the response - uncomment\r\n        // console.log('Server Response:', response.data);\r\n\r\n        // Emit an event to notify the parent component\r\n        this.$emit('form-submitted', {\r\n          box_id: this.box_id,\r\n          box_number: this.box_number,\r\n          title: this.title,\r\n          description: this.description,\r\n          get_image: this.get_image,\r\n        });\r\n      } catch (error) {\r\n        console.error('Error submitting form:', error);\r\n        // Optionally, you can handle errors and show a message to the user\r\n      }\r\n    },\r\n\r\n    onChange(image) {\r\n      console.log('New picture selected!')\r\n      if (image) {\r\n        console.log('Picture loaded.')\r\n\r\n        console.log(this.$refs.pictureInput.file)\r\n        // console.log(this.getBase64Image(this.$refs.pictureInput.file))\r\n      } else {\r\n        console.log('FileReader API not supported: use the <form>, Luke!')\r\n      }\r\n    },\r\n    async showPopup(message) {\r\n      // Access the showPopup method of the PopupBox component\r\n      await this.$refs.popupBox.showPopup(message);\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    // Call getItems when the component is created\r\n    try {\r\n      this.isLoading = true;\r\n      this.box = await this.getFreeBox();\r\n      console.log(\"Box_num: \", this.box.box_num);\r\n      if (this.box.box_num == -1) {\r\n        await this.showPopup(`There are no available boxes :((`);\r\n        this.$router.push({ path: `/login` });\r\n      } else {\r\n        this.box_id = this.box.unique_ID;\r\n        this.box_number = this.box.box_num;\r\n        console.log(\"Box_id: \", this.box_id);\r\n        console.log(\"Box_num: \", this.box_number);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching product:', error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n  \r\n<style scoped>\r\n/* Add styling if needed */\r\n</style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}